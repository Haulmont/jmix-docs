= Jmix Search Architecture

image:search:search_architecture.png[Architecture Diagram, align="center"]

Search consists of the following components:

* *Startup Index Synchronizer* - automatically validates and recreates irrelevant\missing indexes on application startup. Starts background process with enqueueing all instances of entities related to created indexes.
* *Entity Tracking Listener* - tracks changes of indexed entities and enqueues corresponding queue items.
* *Quartz Scheduler* - schedules job that periodically processes items of the Indexing Queue.
* *Indexing Queue Manager* - enqueues items to the Indexing Queue. Processes previously enqueued items and performs corresponding actions via the Entity Indexer.
* *Entity Indexer* - performs operations with index data: saves and deletes entity instances.
* *ES Index Manager* - manages index metadata: creates and drops indexes, validates mappings.
* *Entity Searcher* - performs search in indexes and retrieve search result that can be render on UI screen.

Indexing workflow:

* Every change (create\update\remove) of indexed entities is tracked via the Entity Tracking Listener and enqueued as a queue item.
* Scheduled execution of the Indexing Queue Manager extracts next batch of queue items and processes them - saves or deletes corresponding document in index.